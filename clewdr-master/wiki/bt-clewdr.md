### 教程：在宝塔面板上部署并运行 ClewdR

#### 前置步骤：打开宝塔面板的终端
1. 登录到你的宝塔面板。
2. 在宝塔面板的左侧导航栏中，找到并点击 **终端** 选项。
3. 终端窗口会打开，你可以在此输入命令进行操作。如果需要以 root 权限执行命令，请确保已切换到 root 用户（可以通过 `sudo -i` 命令切换）。
4. 确保你的服务器已连接到互联网，以便下载所需文件。

以下是具体的操作步骤：

#### 步骤 1：查看系统架构
运行以下命令，确认你的系统架构（例如 x86_64 或 arm64）：
```bash
uname -m
```
- 输出可能是 `x86_64`（64 位 Intel/AMD）、`arm64`（64 位 ARM）等。
- 记录架构信息，选择对应的 `clewdr` 二进制文件（如 `clewdr-linux-x86_64.zip`）。

#### 步骤 2：查看 `glibc` 版本
运行以下命令，确认系统当前 `glibc` 版本：
```bash
ldd --version
```
- 输出第一行会显示 `glibc` 版本，例如 `ldd (Debian GLIBC 2.36-9+deb12u10) 2.36`。
- 记录版本号（如 2.36），以便判断是否满足 `clewdr` 的要求。

#### 步骤 3：选择 `clewdr` 或 `musl clewdr`
根据 `glibc` 版本和系统情况，选择合适的 `clewdr` 版本：
- **选择 `clewdr`（动态链接版本）**：
  - 如果你的 `glibc` 版本 >= `clewdr` 要求的版本（例如 `clewdr` 要求 `GLIBC 2.38`，你的系统是 2.38 或更高），可以选择普通 `clewdr` 版本（如 `clewdr-linux-x86_64.zip`）。
  - 优点：依赖系统库，文件较小。
  - 适用场景：系统较新，`glibc` 版本满足要求。
  - 下载地址：`https://github.com/Xerxes-2/clewdr/releases/latest/download/clewdr-linux-x86_64.zip`（根据架构调整文件名）。

- **选择 `musl clewdr`（静态链接版本）**：
  - 如果你的 `glibc` 版本 < `clewdr` 要求的版本（例如系统是 2.36，但 `clewdr` 要求 2.38），或你希望避免 `glibc` 依赖问题，应选择 `musl` 版本（如 `clewdr-musllinux-x86_64.zip`）。
  - 优点：静态链接，不依赖系统 `glibc`，兼容性更好。
  - 适用场景：系统较旧，`glibc` 版本不足，或希望环境独立。
  - 下载地址：`https://github.com/Xerxes-2/clewdr/releases/latest/download/clewdr-musllinux-x86_64.zip`（根据架构调整文件名）。

#### 步骤 4：下载和运行
根据架构和版本选择，下载对应的文件：
```bash
# 示例：下载 musl 版本（x86_64）
curl -fL "https://github.com/Xerxes-2/clewdr/releases/latest/download/clewdr-musllinux-x86_64.zip" -o clewdr-musllinux.zip
# 解压
unzip clewdr-musllinux.zip -d .
# 设置执行权限
chmod +x clewdr
# 运行测试
./clewdr
```
- 如果运行时出现 `GLIBC_X.XX not found` 错误，说明你选择了普通版本但系统 `glibc` 版本不足，请改用 `musl` 版本。
- 如果运行正常，说明选择正确。

#### 步骤 5：通过宝塔面板配置 `clewdr` 项目
1. 打开宝塔面板左侧导航栏中的 **网站** 选项。
2. 在上方的项目类型选择中，点击 **其他项目**。
3. 点击 **添加通用项目** 按钮，进入项目配置页面。
4. 在 **项目执行文件** 位置中，填写你刚才下载并解压的 `clewdr` 文件的完整路径（例如 `/root/clewdr`）。可以通过终端使用 `pwd` 命令查看当前目录路径，或者使用 `find / -name clewdr` 查找文件位置。
5. **项目名称** 填写 `clewdr`（或其他你喜欢的名称）。
6. **项目端口** 如果你没有修改过，默认是 `8484`。运行一次 `clewdr` 后会生成 `clewdr.toml` 配置文件，你可以在其中修改端口。如果需要外网访问，请将监听 IP 设置为 `0.0.0.0`。
7. **执行命令** 中，复制你上方填写的 **项目执行文件** 的完整路径（例如 `/root/clewdr`）。
8. **运行用户** 选择 `root`（确保有足够的权限）。
9. **开机启动** 和 **项目备注** 根据你的需求酌情设置（建议开启开机启动以便服务器重启后自动运行）。
10. 点击 **确定** 按钮，完成项目添加。

#### 步骤 6：运行和访问 `clewdr`
1. 配置完成后，回到宝塔面板的 **其他项目** 列表，找到刚刚添加的 `clewdr` 项目。
2. 点击右侧的 **启动** 按钮，运行 `clewdr`。
3. 如果你的酒馆（或其他相关服务）也部署在同一台机器上，可以通过 `127.0.0.1:8484` 来访问 `clewdr` 服务。如果在不同机器上，则使用服务器的外网 IP 地址（如 `你的服务器IP:8484`）进行访问。
4. 如果无法访问，请检查防火墙设置，确保端口 `8484` 已开放（可在宝塔面板的 **安全** 选项中添加放行规则）。

#### 注意事项
- **优先选择 `musl` 版本**：除非你明确知道系统 `glibc` 版本满足要求，否则 `musl` 版本是更安全的选择，避免兼容性问题。
- **架构匹配**：确保下载的文件名中的架构（如 `x86_64` 或 `arm64`）与 `uname -m` 输出一致。
- **端口冲突**：如果 `8484` 端口已被占用，请修改 `clewdr.toml` 文件中的端口设置，并同步更新宝塔项目配置中的端口信息。